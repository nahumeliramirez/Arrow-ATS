<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title><!--(auto-fill by runme.js--></title>

    <!-- ChiliPeppr is based on bootstrap CSS. -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- Customized version of require.js for ChiliPeppr. Please see require.js docs for how
    ChiliPeppr's dependency system works as it's based on require.js. -->
    <script type='text/javascript' src="//i2dcui.appspot.com/js/require.js"></script>

    <!-- widget.css DON'T REMOVE -->
    <style type='text/css'>
        /* widget.css will get inlined here by runme.js. don't remove this comment or inlining will fail. */
    </style>
    <link rel="stylesheet" type="text/css" href="widget.css">
    <!-- DON'T REMOVE end widget.css -->

    <!-- widget.js DON'T REMOVE -->
    <script type='text/javascript'>
        //<![CDATA[
        /* widget.js will get inlined here by runme.js. don't remove this comment or inlining will fail. */
        //]]>
    </script>
    <script type='text/javascript' src="widget.js"></script>
    <!-- DON'T REMOVE end widget.js -->

</head>

<body>
    <div id="com-chilipeppr-widget-cayenn" class="panel panel-default">
        <div class="panel-heading ">

            <div class="btn-toolbar pull-right" role="toolbar">
                <div class="progress hidden" style="width:60px;float:left;position:relative;">
                  <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 82%;xmin-width:2em;">
                    <span class="sr-only">2% Complete</span>
                  </div>
                  <div class="upload-text" xstyle="">Upload</div>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-xs btn-default btn-refresh" data-delay="1000" 
                    data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" 
                    data-title="Rescan Network for Devices" data-content="Send out a broadcast request via UDP for all devices to send back an announcement of their existence."><span class="glyphicon glyphicon-refresh"></span>
                    </button>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-xs btn-default hidebody"><span class="glyphicon glyphicon-chevron-up"></span>
                    </button>
                </div>
                <div class="btn-group">
                    <div class="dropdown">
                        <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
                    </div>
                </div>
            </div> <span class="panel-title" data-toggle="popover">Cayenn Devices</span> <span style="font-size:9px;" class="fb-build">v1</span>

        </div>
        <div class="panel-body" style="">
            
            <!-- Main View Area of Icons -->
            <div class="cayenn-icon-list">
                
            <!-- Nav tabs -->
            <ul class="nav nav-tabs hidden" role="tablist">
                <li class="active"><a href="#com-chilipeppr-widget-cayenn-tabActive" role="tab" data-toggle="tab">Active</a>
                </li>
                <li><a href="#com-chilipeppr-widget-cayenn-tabInactive" role="tab" data-toggle="tab">Inactive</a></li>
                <!--<li><a href="#com-chilipeppr-widget-cayenn-tab3" role="tab" data-toggle="tab">Tab 3</a></li>-->
            </ul>
            <!-- Tab panes -->

            <div class="tab-content">
    
                <!-- Tab 1 -->
                <div class="tab-pane active" id="com-chilipeppr-widget-cayenn-tabActive">
                    <div class="cayenn-icons xhidden">
                        
                        <p style="padding-top:10px;">No devices seen on network yet.</p>
                        
                        <p class="alert alert-info" style="margin-right:20px;">Requires Serial Port JSON Server 1.93 or later.</p>

                        <p style="font-size:10px;">
                            <a href="http://chilipeppr2.blogspot.com/2016/10/cayenn-protocol-for-chilipeppr_28.html">Read 
                            this blog</a> to understand how to create a Cayenn device. Cayenn is 
                            an IoT protocol that allows add-on devices to easily integrate into ChiliPeppr 
                            and sync with your CNC controller. Typical Cayenn devices are lasers, fluid/paste 
                            dispensers, RPM sensors, relays, heating elements, tool changers, etc.</p>
                            
                        
                        <!--<div class="cayenn-icon" style="" data-delay="1000" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" -->
                        <!--    data-title="DispenserPaste" -->
                        <!--    data-content='<table class="table table-condensed table-striped">-->
                        <!--        <tr><th>Gcode</th><th>Description</th></tr>-->
                        <!--        <tr><td>Maps to A axis</td><td>Linear slide. Max 0mm. Min -72mm.</td></tr>-->
                        <!--        <tr><td>Maps to A axis</td><td>Auger. Unlimited degrees.</td></tr>-->
                        <!--        </table>-->
                        <!--        <p>Techcon DMP-10 auger with stepper and linear slide</p>-->
                        <!--        <p style="font-size:10px;margin-bottom:0;">IP: 192.168.1.24:8988 UDP/TCP</p>-->
                        <!--        '>-->
                        <!--    <div class="cayenn-deviceimg" style="border:2px solid blue;background-image:url('http://gds-storage-prd.s3.amazonaws.com/fusion-360/161021/1972/70f0aa71/thumbnails/raasrendering-bbf3b3d5-01c5-48e4-bbdb-f81727a520ab-160-160.jpg');" ></div>-->
                        <!--    <div class="cayenn-name">-->
                        <!--        DispenserPaste-->
                        <!--    </div>-->
                        <!--</div>-->
                        <!--<div class="cayenn-icon">-->
                        <!--    <div class="cayenn-deviceimg" style="background-image:url('http://gds-storage-prd.s3.amazonaws.com/fusion-360/161021/1972/70f0aa71/thumbnails/raasrendering-bbf3b3d5-01c5-48e4-bbdb-f81727a520ab-160-160.jpg');" ></div>-->
                        <!--    <div class="cayenn-name">-->
                        <!--        DispenserEpoxy-->
                        <!--    </div>-->
                        <!--</div>-->
                        <!--<div class="cayenn-icon">-->
                        <!--    <div class="cayenn-deviceimg" style="background-image:url('https://sites.google.com/site/dtrlpf/_/rsrc/1433583628469/home/diodes/ndb7675-1-4w-462nm/5822a0b8e8a4c9491c199763d843d53c.jpg?height=180&width=320');" ></div>-->
                        <!--    <div class="cayenn-name">LaserUV</div>-->
                        <!--</div>-->
                        <!--<div class="cayenn-icon">-->
                        <!--    <div class="cayenn-deviceimg" style="background-image:url('https://sites.google.com/site/dtrlpf/_/rsrc/1459450181620/home/diodes/9mm-445nm/35mm%20Module.jpg?height=180&width=320');" ></div>-->
                        <!--    <div class="cayenn-name">Laser6w</div>-->
                        <!--</div>-->
                        <!--<div class="cayenn-icon" data-delay="1000" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" -->
                        <!--    data-title="Dispenser Techcon 1" -->
                        <!--    data-content="<p>Techcon DMP-10 auger with stepper and linear slide</p><p style=font-size:10px;margin-bottom:0;>IP: 192.168.1.24:8988 UDP/TCP</p>">-->
                        <!--    <div class="cayenn-deviceimg" style="background-image:url('http://i.ebayimg.com/images/g/cZsAAOSwU-pXromQ/s-l500.jpg');" ></div>-->
                        <!--    <div class="cayenn-name">-->
                        <!--        SpindleRPM-->
                        <!--    </div>-->
                        <!--</div>-->
                        <!--<div class="cayenn-icon" data-delay="1000" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" -->
                        <!--    data-title="Dispenser Techcon 1" -->
                        <!--    data-content="<p>Techcon DMP-10 auger with stepper and linear slide</p><p style=font-size:10px;margin-bottom:0;>IP: 192.168.1.24:8988 UDP/TCP</p>">-->
                        <!--    <div class="cayenn-deviceimg" style="background-image:url('https://github.com/chilipeppr/homepage/blob/master/raspicam.png?raw=true');" ></div>-->
                        <!--    <div class="cayenn-name">-->
                        <!--        RaspiCam-->
                        <!--    </div>-->
                        <!--</div>-->
                        
                        
                    </div>
                    
                </div>

                <!-- Tab 2 -->
                <div class="tab-pane" id="com-chilipeppr-widget-cayenn-tabInactive">
                    <p>This is the content of tab 2.</p>
                </div>

                <!-- Tab 3 -->
                <div class="tab-pane" id="com-chilipeppr-widget-cayenn-tab3">
                    <p>This is the content of tab 3.</p>
                </div>

            </div>
            
            </div>
            <!-- End Icon List -->
            
            <!-- Single Device View -->
            <div class="cayenn-onedevice hidden" data-deviceid="chip:16446372-flash:1458400-mac:18:fe:34:fa:f3:a4">
                
                <table class="" style="border:0px solid blue;margin-top:0px;width:100%;height:100%;"><tr valign="top"><td>
                
                <div class="cayenn-icon-small">
                <div class="cayenn-icon " style="" data-delay="1000" data-animation="true" data-placement="auto" data-container="body" data-trigger="hover" 
                    data-title="DispenserPaste" 
                    data-content='<table class="table table-condensed table-striped">
                        <tr><th>Gcode</th><th>Description</th></tr>
                        <tr><td>Maps to A axis</td><td>Linear slide. Max 0mm. Min -72mm.</td></tr>
                        <tr><td>Maps to A axis</td><td>Auger. Unlimited degrees.</td></tr>
                        </table>
                        <p>Techcon DMP-10 auger with stepper and linear slide</p>
                        <p style="font-size:10px;margin-bottom:0;">IP: 192.168.1.24:8988 UDP/TCP</p>
                        '>
                    <div class="cayenn-deviceimg" style="background-image:url('http://gds-storage-prd.s3.amazonaws.com/fusion-360/161021/1972/70f0aa71/thumbnails/raasrendering-bbf3b3d5-01c5-48e4-bbdb-f81727a520ab-160-160.jpg');" ></div>
                    <div class="cayenn-name">
                        DispenserPaste
                    </div>
                </div>
                </div>
                
                </td><td style="border:0px solid green;width:100%;height:150px;margin:0;padding:0;overflow:auto;">
                
                    <!-- Per Device Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        
                        <li class="active">
                            <a href="#cayenn-onedevice-tabLog" role="tab" data-toggle="tab">Log</a>
                        </li>
                        <li>
                            <a href="#cayenn-onedevice-tabQ" role="tab" data-toggle="tab">Queue</a>
                        </li>
                        <li class="xactive">
                            <a href="#cayenn-onedevice-tabCmds" role="tab" data-toggle="tab">Commands</a>
                        </li>
                        <li class="xactive">
                            <a href="#cayenn-onedevice-tabInfo" role="tab" data-toggle="tab">Info</a>
                        </li>
                    </ul>
                    
                    <!-- Per Device Tab panes -->
                    <div class="tab-content">
            
                        <!-- Per Device. Tab Comands -->
                        <div class="tab-pane xactive" id="cayenn-onedevice-tabCmds">
                            <div class="cayenn-cmdlist" style="margin-top:6px;">
                                <button class="btn btn-xs btn-default">ResetCtr</button>
                                <button class="btn btn-xs btn-default">GetCmds</button>
                                <button class="btn btn-xs btn-default">GetQ</button>
                                <button class="btn btn-xs btn-default">WipeQ</button>
                            </div>
                        </div>
                        <div class="tab-pane active" id="cayenn-onedevice-tabLog">
                            <div class="dropdown dropdown-cayenn-cmds" style="">
                              <button class="btn btn-default btn-xs dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Device Commands
                                <span class="caret"></span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-cayenn-cmds" aria-labelledby="dropdownMenu1">
                                <li><a href="#">ResetCtr</a></li>
                                <li><a href="#">GetCmds</a></li>
                                <li><a href="#">GetQ</a></li>
                                <li><a href="#">WipeQ</a></li>
                              </ul>
                            </div>
                            <table xvalign="top" style="" class="cayenn-log table-log table table-condensed table-striped">
                                <tr><td>> 3:13 PM</td><td>{"Cmd":"GetQ"}</td></tr>
                                <tr><td>< 3:13 PM</td><td>{"Announce":"i-am-a-client"}</td></tr>
                                <tr><td>> 3:13 PM</td><td>{"Cmd":"GetCmds"}</td></tr>
                            </table>
                        </div>
                        <div class="tab-pane" id="cayenn-onedevice-tabQ">
                            <div style="padding-top:6px;">
                                <button class="btn btn-xs btn-default btn-ResetCtr">ResetCtr</button>
                                <!--<button class="btn btn-xs btn-default btn-GetCmds">GetCmds</button>-->
                                <button class="btn btn-xs btn-default btn-GetQ">GetQ</button>
                                <button class="btn btn-xs btn-default btn-WipeQ">WipeQ</button>
                                <button class="btn btn-xs btn-default btn-CmdQ">CmdQ</button>
                            </div>
                            <table xvalign="top" style="width:100%;xheight:100%;margin-top:6px" class="cayenn-qlist table table-condensed table-striped">
                                <tr><th colspan="2" class="">
                                    Click GetQ to retrieve
                                </th></tr>
                                <!--<tr><td>0</td><td>{"Cmd":"LinearSlideOn"}</td></tr>-->
                                <!--<tr><td>1</td><td>{"Cmd":"AirOn"}</td></tr>-->
                                <!--<tr><td>2</td><td>{"Cmd":"AugerOn","Speed":5}</td></tr>-->
                                <!--<tr><td>3</td><td>{"Cmd":"AugerOff"}</td></tr>-->
                                <!--<tr><td>4</td><td>{"Cmd":"AirOff"}</td></tr>-->
                                <!--<tr><td>5</td><td>{"Cmd":"LinearSlideOff"}</td></tr>-->
                            </table>
                        </div>
                        <div class="tab-pane" id="cayenn-onedevice-tabInfo">
                            <div style="padding:10px;">
                                <p class="tabInfo-name" style="xfont-size:10px;margin-bottom:0;">Name: LaserUV</p>
                                <p class="tabInfo-desc" style="xfont-size:10px;margin-bottom:0;">Description: Control the BDR209 UV laser</p>
                                <p class="tabInfo-ip" style="xfont-size:10px;margin-bottom:0;">IP: 10.0.0.5:8988 UDP/TCP</p>
                                <p class="tabInfo-deviceid" style="xfont-size:10px;margin-bottom:0;">DeviceId: chip:903763-mac:60:01:94:0d:ca:53</p>
                                <p class="tabInfo-widget" style="xfont-size:10px;margin-bottom:0;">Widget: com-chilipeppr-widget-laser</p>
                            </div>
                        </div>

                </td></tr></table>
                
                <button style="position:absolute;top:2px;left:2px;" type="button" class="btn btn-xs btn-default cayenn-backbtn" data-container="body" data-toggle="popover" data-placement="auto" data-content="Go back to main menu" data-trigger="hover" data-delay="1000" data-original-title="" title=""> 
                    <span class="glyphicon glyphicon-arrow-left"></span>
                </button>
                
                <!-- Textbox at bottom for commands -->
                <input type="text" class="form-control cayenn-entercmd" placeholder="Enter Cayenn Command">
                
            </div>

            <!-- 3D View -->
            <div id="cayenn-renderarea" class="hidden" style="border:0px solid red;position:absolute;left:0;top:0;bottom:0;right:0;">
                <button style="position:absolute;right:10px;bottom:10px;" type="button" class="btn btn-xs btn-default cayenn-viewextents" data-container="body" data-toggle="popover" data-placement="auto" data-content="View extents of object" data-trigger="hover" data-delay="1000" data-original-title="" title=""> 
                    <span class="glyphicon glyphicon-eye-open"></span>
                </button>
                <button style="position:absolute;top:10px;left:10px;" type="button" class="btn btn-xs btn-default cayenn-backbtn" data-container="body" data-toggle="popover" data-placement="auto" data-content="Go back to main menu" data-trigger="hover" data-delay="1000" data-original-title="" title=""> 
                    <span class="glyphicon glyphicon-arrow-left"></span>
                </button>
            </div>
            
            
        </div>
    
    </div>
    
    <!-- Cayenn File Pre-Process Modal -->
    <div class="modal fade " id="com-chilipeppr-widget-cayenn-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <h4 class="modal-title">Your Gcode File Has Cayenn Commands</h4>
                </div>
                <div class="modal-body">
                    <!--<div class="alert alert-danger" role="alert">ChiliPeppr was unable to automatically determine whether your file should run in inches (G20) or millimetres (G21).</div>-->
                    <p>
                        Your Gcode file contains unprocessed Cayenn commands. We will pre-process the file to convert
                        the commands to coolant on/off commands with ID counters.
                    </p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-processit" data-dismiss="modal">Process It</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
    
    <!-- Cayenn File Pre-Process Modal for Errors -->
    <div class="modal fade " id="com-chilipeppr-widget-cayenn-modal-errors" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <h4 class="modal-title">Your Cayenn Commands Have Errors</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger" role="alert">ChiliPeppr was unable to parse your Gcode file because your Cayenn commands had errors.</div>
                    <p class="errlist">
                        
                    </p>

                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="btn btn-default btn-processit" data-dismiss="modal">Process It</button>-->
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
    
    <!-- Cayenn File No Device Modal -->
    <div class="modal fade " id="com-chilipeppr-widget-cayenn-modal-nodevice" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <h4 class="modal-title">No Cayenn Device Matches your Gcode Device</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger" role="alert">ChiliPeppr was unable to find a Cayenn device that matched your Gcode device.</div>
                    <p class="errlist">
                        
                    </p>

                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="btn btn-default btn-processit" data-dismiss="modal">Process It</button>-->
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
    
    <!-- Cayenn Upload Progress Modal -->
    <div class="modal fade " id="com-chilipeppr-widget-cayenn-modal-uploadprogress" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <h4 class="modal-title">Cayenn Device Upload Progress</h4>
                </div>
                <div class="modal-body">
                    
                    <div class="cayenn-device-region-template hidden">
                        <div class="cayenn-device-name-region">
                            <!--Device: <span class="device-name">Laser</span>-->
                            <div class="cayenn-device-icon">
                            </div>
                        </div>
                        
                        <p>Commands to Upload: <span class="upload-count">21</span></p>
                        <div class="progress">
                          <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 2%;xmin-width:2em;">
                            <span class="sr-only">2% Complete</span>
                          </div>
                        </div>
                        <table class="table table-condensed table-striped table-cayenn-upload">
                            <tr><th></th><th>Command</th><th>Status</th></tr>
                            <tr><td><span class="glyphicon glyphicon-ok cayenn-checkProgress cayenn-checkProgressDone"></span></td><td>{"Cmd":"WipeQ"}</td><td>Completed</td></tr>
                            <tr><td><span class="glyphicon glyphicon-ok cayenn-checkProgress cayenn-checkProgressSent"></span></td><td>{"Cmd":"CmdQ","Id":0,"RunCmd":{"CayennDevice":"LaserUV","Cmd":"LaserBoot","PauseAfter":2}}</td><td>Sent. Waiting for verify...</td></tr>
                            <tr><td><span class="glyphicon glyphicon-ok cayenn-checkProgress"></span></td><td>{"Cmd":"CmdQ","Id":1,"RunCmd":{"Cmd":"PwmOff"}}</td><td>Waiting...</td></tr>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <!--<button type="button" class="btn btn-default btn-processit" data-dismiss="modal">Process It</button>-->
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
    
</body>

</html>
